---
title: Run the Iceberg Connector Externally
description: Use YAML to ingest Iceberg table metadata, including partitions, columns, and associated lineage information.
slug: /connectors/database/iceberg/yaml
sidebarTitle: Run Externally
mode: "wide"
---
import { ConnectorDetailsHeader } from '/snippets/components/ConnectorDetailsHeader/ConnectorDetailsHeader.jsx'
import { CodePreview, ContentPanel, ContentSection, CodePanel } from '/snippets/components/CodePreview.jsx'
import IngestionSinkDef from '/snippets/connectors/yaml/ingestion-sink-def.mdx'
import WorkflowConfigDef from '/snippets/connectors/yaml/workflow-config-def.mdx'
import IngestionCli from '/snippets/connectors/yaml/ingestion-cli.mdx'
import PythonRequirements from '/snippets/connectors/python-requirements.mdx'
import ExternalIngestionDeployment from '/snippets/connectors/external-ingestion-deployment.mdx'
import IngestionSink from '/snippets/connectors/yaml/ingestion-sink.mdx'
import WorkflowConfig from '/snippets/connectors/yaml/workflow-config.mdx'
import SourceConfigDef from '/snippets/connectors/yaml/database/source-config-def.mdx'
import SourceConfig from '/snippets/connectors/yaml/database/source-config.mdx'

<ConnectorDetailsHeader
icon='/public/images/connectors/iceberg.webp'
name="Iceberg"
stage="BETA"
availableFeatures={["Metadata", "Owners"]}
unavailableFeatures={["Query Usage", "Data Profiler", "Data Quality", "Lineage", "Column-level Lineage", "dbt", "Tags", "Stored Procedures", "Sample Data", "Auto-Classification"]} />
In this section, we provide guides and references to use the Iceberg connector.
Configure and schedule Iceberg metadata from the OpenMetadata UI:
- [Requirements](#requirements)
- [Metadata Ingestion](#metadata-ingestion)
- [Enable Security](#securing-rest-catalog-connection-with-ssl-in-openmetadata)
<ExternalIngestionDeployment />
## Requirements
The requirements actually depend on the Catalog and the FileSystem used. In a nutshell, the used credentials must have access to reading the Catalog and the Metadata File.
### Glue Catalog
Must have `glue:GetDatabases`, and `glue:GetTables` permissions to be able to read the Catalog.
Must also have the `s3:GetObject` permission for the location of the Iceberg tables.
### DynamoDB Catalog
Must have `dynamodb:DescribeTable` and `dynamodb:GetItem` permissions on the Iceberg Catalog table.
Must also have the `s3:GetObject` permission for the location of the Iceberg tables.
### Hive / REST Catalog
It depends on where and how the Hive / Rest Catalog is setup and where the Iceberg files are stored.
### Python Requirements
<PythonRequirements />
To run the Iceberg ingestion, you will need to install:
```bash
pip3 install "openmetadata-ingestion[iceberg]"
```
## Metadata Ingestion
All connectors are defined as JSON Schemas.
[Here](https://github.com/open-metadata/OpenMetadata/blob/main/openmetadata-spec/src/main/resources/json/schema/entity/services/connections/database/icebergConnection.json)
you can find the structure to create a connection to Iceberg.
In order to create and run a Metadata Ingestion workflow, we will follow
the steps to create a YAML configuration able to connect to the source,
process the Entities if needed, and reach the OpenMetadata server.
The workflow is modeled around the following
[JSON Schema](https://github.com/open-metadata/OpenMetadata/blob/main/openmetadata-spec/src/main/resources/json/schema/metadataIngestion/workflow.json)
## 1. Define the YAML Config

### This is a sample config for Iceberg using a Glue Catalog:

<CodePreview>

<ContentPanel>

<ContentSection id={1} title="Source Configuration" lines="1-3">

Configure the source type and service name for your Iceberg connector.

</ContentSection>

<ContentSection id={2} title="Catalog Name" lines="3">

**name**: Enter the catalog name of choice.

</ContentSection>

<ContentSection id={3} title="AWS Configuration" lines="10">

* **awsAccessKeyId**: Enter your secure access key ID for your AWS connection.
* **awsSecretAccessKey**: Enter the Secret Access Key (the passcode key pair to the key ID from above).
* **awsSessionToken (optional)**: Enter the Session Access Token (used if using short lived credentials).
* **awsRegion**: Specify the AWS region used.

</ContentSection>

<ContentSection id={4} title="Database Name" lines="11">

**databaseName (optional)**: Enter the database name of choice. If not it will be set as 'default'.

</ContentSection>

<ContentSection id={5} title="Ownership Property" lines="12">

**ownershipProperty (optional)**: Property to use when searching for the owner. It defaults to 'owner'.

</ContentSection>

<ContentSection id={6} title="Source Config" lines="15-58">

<SourceConfigDef />

</ContentSection>

<ContentSection id={7} title="Sink Configuration" lines="59-61">

<IngestionSinkDef />

</ContentSection>

<ContentSection id={8} title="Workflow Configuration" lines="62-78">

<WorkflowConfigDef />

</ContentSection>

</ContentPanel>

<CodePanel fileName="iceberg_glue_config.yaml">

```yaml
source:
  type: iceberg
  serviceName: glue_test
  serviceConnection:
    config:
      type: Iceberg
      catalog:
        name: my_glue
        awsConfig:
          awsAccessKeyId: access key id
          awsSecretAccessKey: access secret key
          awsRegion: aws region name
      databaseName: my_database_name
      ownershipProperty: custom_owner_property
```

<SourceConfig />

<IngestionSink />

<WorkflowConfig />

</CodePanel>

</CodePreview>
### This is a sample config for Iceberg using a DynamoDB Catalog:

<CodePreview>

<ContentPanel>

<ContentSection id={1} title="Source Configuration" lines="1-3">

Configure the source type and service name for your Iceberg connector.

</ContentSection>

<ContentSection id={2} title="Catalog Name" lines="3">

**name**: Enter the catalog name of choice.

</ContentSection>

<ContentSection id={3} title="Table Name" lines="78">

**tableName**: Enter the name of the table where the Iceberg Catalog is stored.

</ContentSection>

<ContentSection id={4} title="AWS Configuration" lines="10">

* **awsAccessKeyId**: Enter your secure access key ID for your AWS connection.
* **awsSecretAccessKey**: Enter the Secret Access Key (the passcode key pair to the key ID from above).
* **awsSessionToken (optional)**: Enter the Session Access Token (used if using short lived credentials).
* **awsRegion**: Specify the AWS region used.

</ContentSection>

<ContentSection id={5} title="Database Name" lines="13">

**databaseName (optional)**: Enter the database name of choice. If not it will be set as 'default'.

</ContentSection>

<ContentSection id={6} title="Ownership Property" lines="14">

**ownershipProperty (optional)**: Property to use when searching for the owner. It defaults to 'owner'.

</ContentSection>

<ContentSection id={7} title="Source Config" lines="15-58">

<SourceConfigDef />

</ContentSection>

<ContentSection id={8} title="Sink Configuration" lines="59-61">

<IngestionSinkDef />

</ContentSection>

<ContentSection id={9} title="Workflow Configuration" lines="62-78">

<WorkflowConfigDef />

</ContentSection>

</ContentPanel>

<CodePanel fileName="iceberg_dynamodb_config.yaml">

```yaml
source:
  type: iceberg
  serviceName: glue_test
  serviceConnection:
    config:
      type: Iceberg
      catalog:
        name: my_dynamo
        tableName: catalog_table
        awsConfig:
          awsAccessKeyId: access key id
          awsSecretAccessKey: access secret key
          awsRegion: aws region name
      databaseName: my_database_name
      ownershipProperty: custom_owner_property
```

<SourceConfig />

<IngestionSink />

<WorkflowConfig />

</CodePanel>

</CodePreview>
### This is a sample config for Iceberg using a Hive Catalog:

<CodePreview>

<ContentPanel>

<ContentSection id={1} title="Source Configuration" lines="1-3">

Configure the source type and service name for your Iceberg connector.

</ContentSection>

<ContentSection id={2} title="Catalog Name" lines="3">

**name**: Enter the catalog name of choice.

</ContentSection>

<ContentSection id={3} title="URI" lines="67-68">

**uri**: Enter the uri to the Hive Metastore. Example: 'thrift://localhost:67-68083'.

</ContentSection>

<ContentSection id={4} title="File System" lines="10">

**fileSystem (Optional)**: Enter the specific configuration given the file system used to store the Iceberg files.

* **Local**: No configuration needed
* **S3 (Or S3 Compatible)**:
    * **awsAccessKeyId**: Enter your secure access key ID for your AWS connection.
    * **awsSecretAccessKey**: Enter the Secret Access Key (the passcode key pair to the key ID from above).
    * **awsSessionToken (optional)**: Enter the Session Access Token (used if using short lived credentials).
    * **awsRegion**: Specify the AWS region used.
    * **endPointURL**: EndPoint URL to use with AWS.
* **Azure**:
    * **clientId** : Client ID of the data storage account
    * **clientSecret** : Client Secret of the account
    * **tenantId** : Tenant ID under which the data storage account falls
    * **accountName** : Account Name of the data Storage

</ContentSection>

<ContentSection id={5} title="Database Name" lines="13">

**databaseName (optional)**: Enter the database name of choice. If not it will be set as 'default'.

</ContentSection>

<ContentSection id={6} title="Ownership Property" lines="14">

**ownershipProperty (optional)**: Property to use when searching for the owner. It defaults to 'owner'.

</ContentSection>

<ContentSection id={7} title="Source Config" lines="15-58">

<SourceConfigDef />

</ContentSection>

<ContentSection id={8} title="Sink Configuration" lines="59-61">

<IngestionSinkDef />

</ContentSection>

<ContentSection id={9} title="Workflow Configuration" lines="62-78">

<WorkflowConfigDef />

</ContentSection>

</ContentPanel>

<CodePanel fileName="iceberg_hive_config.yaml">

```yaml
source:
  type: iceberg
  serviceName: glue_test
  serviceConnection:
    config:
      type: Iceberg
      catalog:
        name: my_hive
        uri: thrift://localhost:9083
        fileSystem:
          # S3 Compatible
          awsAccessKeyId: access key id
          awsSecretAccessKey: access secret key
          awsRegion: aws region name
          # Azure
          # clientId: client_id
          # clientSecret: client_secret
          # tenantId: tenant_id
          # accountName: account_name
      databaseName: my_database_name
      ownershipProperty: custom_owner_property
```

<SourceConfig />

<IngestionSink />

<WorkflowConfig />

</CodePanel>

</CodePreview>
### This is a sample config for Iceberg using a REST Catalog:

<CodePreview>

<ContentPanel>

<ContentSection id={1} title="Source Configuration" lines="1-3">

Configure the source type and service name for your Iceberg connector.

</ContentSection>

<ContentSection id={2} title="Catalog Name" lines="3">

**name**: Enter the catalog name of choice.

</ContentSection>

<ContentSection id={3} title="URI" lines="67-68">

**uri**: Enter the uri to the Rest Catalog. Example: 'http://localhost:8181'.

</ContentSection>

<ContentSection id={4} title="Credential" lines="78">

**credential (Optional)**: OAuth2 Credential to use for Authentication flow.

* **clientId**: OAuth2 Client ID.
* **clientSecret**: OAuth2 Client Secret.

</ContentSection>

<ContentSection id={5} title="Token" lines="68">

**token (Optional)**: Enter the Bearer token for the 'Authorization' header.

</ContentSection>

<ContentSection id={6} title="SSL Configuration" lines="74">

**ssl (Optional)**: Needed configuration for SSL.

* **caCertPath**: CA Certificate Path.
* **clientCertPath**: Client Certificate Path.
* **privateKeyPath**: Private Key Path.

</ContentSection>

<ContentSection id={7} title="SigV4" lines="78">

**sigv4 (Optional)**: Used if signing requests using AWS SigV4 protocol.

* **signingRegion** : AWS Region used when signing a request.
* **signingName** : Name used to sign the request with.

</ContentSection>

<ContentSection id={8} title="File System" lines="10">

**fileSystem (Optional)**: Enter the specific configuration given the file system used to store the Iceberg files.

* **Local**: No configuration needed
* **S3 (Or S3 Compatible)**:
    * **awsAccessKeyId**: Enter your secure access key ID for your AWS connection.
    * **awsSecretAccessKey**: Enter the Secret Access Key (the passcode key pair to the key ID from above).
    * **awsSessionToken (optional)**: Enter the Session Access Token (used if using short lived credentials).
    * **awsRegion**: Specify the AWS region used.
    * **endPointURL**: EndPoint URL to use with AWS.
* **Azure**:
    * **clientId** : Client ID of the data storage account
    * **clientSecret** : Client Secret of the account
    * **tenantId** : Tenant ID under which the data storage account falls
    * **accountName** : Account Name of the data Storage

</ContentSection>

<ContentSection id={9} title="Database Name" lines="13">

**databaseName (optional)**: Enter the database name of choice. If not it will be set as 'default'.

</ContentSection>

<ContentSection id={10} title="Warehouse Location" lines="78">

**warehouseLocation (optional)**: Warehouse Location. Used to specify a custom warehouse location if needed.
Most Catalogs should have a working default warehouse location.

</ContentSection>

<ContentSection id={11} title="Ownership Property" lines="14">

**ownershipProperty (optional)**: Property to use when searching for the owner. It defaults to 'owner'.

</ContentSection>

<ContentSection id={12} title="Source Config" lines="15-58">

<SourceConfigDef />

</ContentSection>

<ContentSection id={13} title="Sink Configuration" lines="59-61">

<IngestionSinkDef />

</ContentSection>

<ContentSection id={14} title="Workflow Configuration" lines="62-78">

<WorkflowConfigDef />

</ContentSection>

</ContentPanel>

<CodePanel fileName="iceberg_rest_config.yaml">

```yaml
source:
  type: iceberg
  serviceName: glue_test
  serviceConnection:
    config:
      type: Iceberg
      catalog:
        name: my_rest
        uri: http://localhost:8181
        credential:
          clientId: client_id
          clientSecret: client_secret
        token: my_bearer_token
        ssl:
          caCertPath: ./ca_cert.pem
          clientCertPath: ./client_cert.crt
          privateKeyPath: ./private.key
        sigv4:
          signingRegion: us-east-2
          signingName: signing_name
        fileSystem:
          # S3 compatible
          awsAccessKeyId: access key id
          awsSecretAccessKey: access secret key
          awsRegion: aws region name
          # Azure
          # clientId: client_id
          # clientSecret: client_secret
          # tenantId: tenant_id
          # accountName: account_name
      databaseName: my_database_name
      warehouseLocation: warehouse_location
      ownershipProperty: custom_owner_property
```

<SourceConfig />

<IngestionSink />

<WorkflowConfig />

</CodePanel>

</CodePreview>

<IngestionCli />
## Securing Rest Catalog Connection with SSL in OpenMetadata
When using `SSL` to establish secure connections between OpenMetadata and Rest Catalog, you can specify the `caCertificate` to provide the CA certificate used for SSL validation. Alternatively, if both client and server require mutual authentication, you'll need to use all three parameters: `ssl_key`, `ssl_cert`, and `ssl_ca`. In this case, `ssl_cert` is used for the client’s SSL certificate, `ssl_key` for the private key associated with the SSL certificate, and `ssl_ca` for the CA certificate to validate the server’s certificate.
```yaml
      ssl:
            caCertPath: ./ca_cert.pem
            clientCertPath: ./client_cert.crt
            privateKeyPath: ./private.key
```
